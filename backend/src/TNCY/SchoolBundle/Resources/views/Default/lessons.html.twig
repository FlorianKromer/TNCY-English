{% extends 'TNCYSchoolBundle::layout.html.twig' %}

{% block title %}{{ "Contact"| trans}} {{ parent() }}  {% endblock %}
    {% block container %}

        <main role="main" class="main contact">
            <!-- Content goes here -->
            <div class="container ">
                <div class="row">
                    <div class="col-md-8">
                        <h1>Nos leçons</h1>
                        {# total items count #}
                        <div class="count">
                            Nombre de leçons : {{ pagination.getTotalItemCount }}
                        </div>

                        <div class="row">
                            {% for lesson in pagination %}
                                <div class="col-md-4">
                                    <div class="panel panel-default">
                                        <div class="page-header">
                                            <h3>{{ lesson.name }}</h3>
                                        </div>
                                        <div class="panel-body">
                                            {{ lesson.summary  | raw }}
                                        </div>
                                        <div class="panel-footer">
                                            Mis à jour le {{ lesson.createdAt | date('Y-m-d') }}
                                        </div>
                                    </div>
                                </div>
                                {% if loop.index is divisible by(3) %}
                                </div>
                                <div class="row">
                                {% endif %}
                            {% endfor %}
                        </div>

                        {# display navigation #}
                        <div class="navigation">
                            {{ knp_pagination_render(pagination) }}
                        </div>
                    </div>
                    <div class="col-md-4">

                        <h2>{{ "Formulaire de recherche de leçon"| trans}}</h2>
                        {{ form_start(form, {'attr': {'class': 'form-horizontal','role': 'form'} }) }}


                        <div class="form-group">
                            {{ form_errors(form) }}
                        </div>
                        <div class="form-group ">
                            {{ form_label(form.name, null, {'label_attr': {'class': 'col-lg-2 control-label'}}) }}
                            <div class="col-lg-10">
                                {{ form_widget(form.name)}}
                            </div>
                        </div>
                        <div class="form-group ">
                            {{ form_label(form.topic, null, {'label_attr': {'class': 'col-lg-2 control-label'}}) }}
                            <div class="col-lg-10">
                                {{ form_widget(form.topic)}}
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-lg-10 col-lg-offset-2">
                                {{ form_widget(form.submit)}}
                            </div>
                        </div>
                        {{ form_widget(form) }}
                        {{ form_end(form) }}   
                    </div>

                </div>
            </div>
        </div>
    </main>

{% endblock %}
{% block javascripts %}

    {{ parent() }}
    <script src="https://cdn.rawgit.com/FezVrasta/dropdown.js/master/jquery.dropdown.js"></script>
    <script type="text/javascript">
        $(".select").dropdown();
    </script>

{% endblock %}
